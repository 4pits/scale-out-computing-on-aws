



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Lab 6: Explore Analytics Dashboard - Scale-Out Computing on AWS Knowledge Base</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../../assets/css/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#lab-6-explore-analytics-dashboard" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="Scale-Out Computing on AWS Knowledge Base" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Scale-Out Computing on AWS Knowledge Base
            </span>
            <span class="md-header-nav__topic">
              
                Lab 6: Explore Analytics Dashboard
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/awslabs/scale-out-computing-on-aws/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    awslabs/scale-out-computing-on-aws
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../../.." class="md-tabs__link">
        What is Scale-Out Computing on AWS ?
      </a>
    
  </li>

      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../analytics/build-kibana-dashboards/" class="md-tabs__link">
          Analytics
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../storage/backend-storage-options/" class="md-tabs__link">
          Storage
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../tutorials/create-your-own-queue/" class="md-tabs__link">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../" class="md-tabs__link md-tabs__link--active">
          Workshops
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="Scale-Out Computing on AWS Knowledge Base" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Scale-Out Computing on AWS Knowledge Base
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/awslabs/scale-out-computing-on-aws/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    awslabs/scale-out-computing-on-aws
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="What is Scale-Out Computing on AWS ?" class="md-nav__link">
      What is Scale-Out Computing on AWS ?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../access-soca-cluster/" title="How to access Scale-Out Computing on AWS" class="md-nav__link">
      How to access Scale-Out Computing on AWS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../install-soca-cluster/" title="Install your Scale-Out Computing on AWS cluster" class="md-nav__link">
      Install your Scale-Out Computing on AWS cluster
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Analytics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Analytics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analytics/build-kibana-dashboards/" title="Create your own analytics dashboard" class="md-nav__link">
      Create your own analytics dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analytics/monitor-cluster-activity/" title="Monitor your cluster and job activity" class="md-nav__link">
      Monitor your cluster and job activity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analytics/review-hpc-costs/" title="Review your HPC costs" class="md-nav__link">
      Review your HPC costs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analytics/set-up-budget-project/" title="Set up budget per project" class="md-nav__link">
      Set up budget per project
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Storage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../storage/backend-storage-options/" title="Understand backend storage" class="md-nav__link">
      Understand backend storage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../storage/launch-job-with-fsx/" title="Launch a job with FSx for Lustre" class="md-nav__link">
      Launch a job with FSx for Lustre
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/create-your-own-queue/" title="Create your own queue" class="md-nav__link">
      Create your own queue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/integration-ec2-job-parameters/" title="Job customization for EC2" class="md-nav__link">
      Job customization for EC2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/job-licenses-flexlm/" title="Job with FlexLM licenses requirements" class="md-nav__link">
      Job with FlexLM licenses requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/job-start-stop-email-notification/" title="Automatic emails when your job start/stop" class="md-nav__link">
      Automatic emails when your job start/stop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/launch-always-on-instances/" title="Launch AlwaysOn nodes" class="md-nav__link">
      Launch AlwaysOn nodes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/launch-your-first-job/" title="Launch your first job" class="md-nav__link">
      Launch your first job
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/manage-ldap-users/" title="Centralized user management" class="md-nav__link">
      Centralized user management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/troubleshoot-job-queue/" title="Debug why your jobs are not starting" class="md-nav__link">
      Debug why your jobs are not starting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/update-soca-dns-ssl-certificate/" title="Change your DNS name and SSL certificate" class="md-nav__link">
      Change your DNS name and SSL certificate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tutorials/use-custom-ami/" title="Use your own AMI" class="md-nav__link">
      Use your own AMI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Workshops
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Workshops
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2" checked>
    
    <label class="md-nav__link" for="nav-7-2">
      reinvent19 MFG405
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        reinvent19 MFG405
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="MFG405 Workshop Overview" class="md-nav__link">
      MFG405 Workshop Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2-3" type="checkbox" id="nav-7-2-3" checked>
    
    <label class="md-nav__link" for="nav-7-2-3">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-2-3">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Module Overview" class="md-nav__link">
      Module Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-deploy-env/" title="Lab 1: Deploy Environment" class="md-nav__link">
      Lab 1: Deploy Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-configure-desktop/" title="Lab 2: Configure Remote Desktop" class="md-nav__link">
      Lab 2: Configure Remote Desktop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-web-login/" title="Lab 3: Launch Remote Desktop Session" class="md-nav__link">
      Lab 3: Launch Remote Desktop Session
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06-launch-vivado/" title="Lab 4: Launch Vivado GUI" class="md-nav__link">
      Lab 4: Launch Vivado GUI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../07-submit-batch/" title="Lab 5: Submit Batch Workloads" class="md-nav__link">
      Lab 5: Submit Batch Workloads
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lab 6: Explore Analytics Dashboard
      </label>
    
    <a href="./" title="Lab 6: Explore Analytics Dashboard" class="md-nav__link md-nav__link--active">
      Lab 6: Explore Analytics Dashboard
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dashboard-url" class="md-nav__link">
    Dashboard URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-data-to-your-cluster" class="md-nav__link">
    Add Data to your cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-time-configuration" class="md-nav__link">
    First Time Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index-information" class="md-nav__link">
    Index Information
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-node" class="md-nav__link">
    Cluster Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-metadata" class="md-nav__link">
    Job Metadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../09-wrap-up/" title="Wrap-up" class="md-nav__link">
      Wrap-up
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../z-budgets/" title="." class="md-nav__link">
      .
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dashboard-url" class="md-nav__link">
    Dashboard URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-data-to-your-cluster" class="md-nav__link">
    Add Data to your cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-time-configuration" class="md-nav__link">
    First Time Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index-information" class="md-nav__link">
    Index Information
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-node" class="md-nav__link">
    Cluster Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-metadata" class="md-nav__link">
    Job Metadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/awslabs/scale-out-computing-on-aws/edit/master/docs/workshops/reinvent19-MFG405/modules/08-analytics.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="lab-6-explore-analytics-dashboard">Lab 6: Explore Analytics Dashboard<a class="headerlink" href="#lab-6-explore-analytics-dashboard" title="Permanent link">&para;</a></h1>
<h3 id="dashboard-url">Dashboard URL<a class="headerlink" href="#dashboard-url" title="Permanent link">&para;</a></h3>
<p>Open your AWS console and navigate to CloudFormation. Select your parent Stack, click Output, and retrieve "WebUserInterface" 
<img alt="" src="../../../../imgs/kibana-endpoint.png" /></p>
<h3 id="add-data-to-your-cluster">Add Data to your cluster<a class="headerlink" href="#add-data-to-your-cluster" title="Permanent link">&para;</a></h3>
<p>By default, Job information are ingested on an hourly basis. Run the command below on the <strong>scheduler host</strong> to trigger on-demand log ingestion into ElasticSearch:
<div class="codehilite"><pre><span></span><span class="nb">source</span> /etc/environment<span class="p">;</span> /apps/python/latest/bin/python3 /apps/soca/cluster_analytics/job_tracking.py
</pre></div></p>
<h3 id="first-time-configuration">First Time Configuration<a class="headerlink" href="#first-time-configuration" title="Permanent link">&para;</a></h3>
<p>Since it's the first time you access this endpoint, you will need to configure your indexes.<br />
First, access Kibana URL and click "Explore on my Own"</p>
<p><img alt="" src="../../../../imgs/kibana-1.png" /></p>
<p>Go under Management and Click Index Patterns</p>
<p><img alt="" src="../../../../imgs/kibana-2.png" /></p>
<p>Select the Index you want to query</p>
<p><img alt="" src="../../../../imgs/kibana-3.png" /></p>
<p>Click next, and then specify the Time Filter key (refer to section below for timestamp id). Once done, click Create Index Pattern&lt;</p>
<p><img alt="" src="../../../../imgs/kibana-4.png" /></p>
<p>Once your Index is configured, go to Kibana, select "Discover" tab to start visualizing the data</p>
<p><img alt="" src="../../../../imgs/kibana-5.png" /></p>
<h3 id="index-information">Index Information<a class="headerlink" href="#index-information" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th></th>
<th>Cluster Node Information</th>
<th>Job Information</th>
</tr>
</thead>
<tbody>
<tr>
<td>Kibana Index Name</td>
<td>pbsnodes</td>
<td>jobs</td>
</tr>
<tr>
<td>Data ingestion</td>
<td>/apps/soca/cluster_analytics/cluster_nodes_tracking.py</td>
<td>/apps/soca/cluster_analytics/job_tracking.py</td>
</tr>
<tr>
<td>Recurrence</td>
<td>1 minute</td>
<td>1 hour <strong>(note: job must be terminated to be shown on ElasticSearch)</strong></td>
</tr>
<tr>
<td>Data uploaded</td>
<td>Host Info (status of provisioned host, lifecycle, memory, cpu etc ..)</td>
<td>Job Info (allocated hardware, licenses, simulation cost, job owner, instance type ...)</td>
</tr>
<tr>
<td>Timestamp Key</td>
<td>Use "timestamp" when you create the index for the first time</td>
<td>use "start_iso" when you create the index for the first time</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<h4 id="cluster-node">Cluster Node<a class="headerlink" href="#cluster-node" title="Permanent link">&para;</a></h4>
<p><img alt="" src="../../../../imgs/kibana-6.png" /></p>
<h4 id="job-metadata">Job Metadata<a class="headerlink" href="#job-metadata" title="Permanent link">&para;</a></h4>
<p><img alt="" src="../../../../imgs/kibana-7.png" /></p>
<h1 id="generate-graph">Generate Graph<a class="headerlink" href="#generate-graph" title="Permanent link">&para;</a></h1>
<h2 id="money-spent-by-instance-type">Money spent by instance type<a class="headerlink" href="#money-spent-by-instance-type" title="Permanent link">&para;</a></h2>
<div class="admonition example">
<p class="admonition-title">Configuration</p>
<ul>
<li>Select "Vertical Bars" and "jobs" index</li>
<li>Y Axis (Metrics):<ul>
<li>Aggregation: Sum</li>
<li>Field: price_ondemand</li>
</ul>
</li>
<li>X Axis (Buckets):<ul>
<li>Aggregation: Terms</li>
<li>Field: instance_type_used</li>
<li>Order By: metric: Sum of price_on_demand</li>
</ul>
</li>
<li>Split Series (Buckets):<ul>
<li>Sub Aggregation: Terms</li>
<li>Field: instance_type_used</li>
<li>Order By:  metric: Sum of price_on_demand</li>
</ul>
</li>
</ul>
</div>
<p><img alt="" src="../../../../imgs/dashboard-2.png" /></p>
<h2 id="jobs-per-user-split-by-instance-type">Jobs per user split by instance type<a class="headerlink" href="#jobs-per-user-split-by-instance-type" title="Permanent link">&para;</a></h2>
<div class="admonition example">
<p class="admonition-title">Configuration</p>
<ul>
<li>Select "Vertical Bars" and "jobs" index</li>
<li>Y Axis (Metrics):<ul>
<li>Aggregation: count</li>
</ul>
</li>
<li>X Axis (Buckets):<ul>
<li>Aggregation: Terms</li>
<li>Field: user.keyword</li>
<li>Order By: metric: Count</li>
</ul>
</li>
<li>Split Series (Buckets):<ul>
<li>Sub Aggregation: Terms</li>
<li>Field: instance_type_used</li>
<li>Order By: metric: Count</li>
</ul>
</li>
</ul>
</div>
<p><img alt="" src="../../../../imgs/dashboard-9.png" />  </p>
<h2 id="most-active-projects">Most active projects<a class="headerlink" href="#most-active-projects" title="Permanent link">&para;</a></h2>
<div class="admonition example">
<p class="admonition-title">Configuration</p>
<ul>
<li>Select "Pie" and "jobs" index</li>
<li>Slice Size (Metrics):<ul>
<li>Aggregation: Count</li>
</ul>
</li>
<li>Split Slices (Buckets):<ul>
<li>Aggregation: Terms</li>
<li>Field: project.keyword</li>
<li>Order By: metric: Count</li>
</ul>
</li>
</ul>
</div>
<p><img alt="" src="../../../../imgs/dashboard-3.png" /></p>
<h2 id="instance-type-launched-by-user">Instance type launched by user<a class="headerlink" href="#instance-type-launched-by-user" title="Permanent link">&para;</a></h2>
<div class="admonition example">
<p class="admonition-title">Configuration</p>
<ul>
<li>Select "Heat Map" and "jobs" index</li>
<li>Value (Metrics):<ul>
<li>Aggregation: Count</li>
</ul>
</li>
<li>Y Axis (Buckets):<ul>
<li>Aggregation: Term</li>
<li>Field: instance_type_used</li>
<li>Order By: metric: Count</li>
</ul>
</li>
<li>X Axis (Buckets):<ul>
<li>Aggregation: Terms</li>
<li>Field: user</li>
<li>Order By: metric: Count</li>
</ul>
</li>
</ul>
</div>
<p><img alt="" src="../../../../imgs/dashboard-5.png" /></p>
<h2 id="number-of-nodes-in-the-cluster">Number of nodes in the cluster<a class="headerlink" href="#number-of-nodes-in-the-cluster" title="Permanent link">&para;</a></h2>
<div class="admonition example">
<p class="admonition-title">Configuration</p>
<ul>
<li>Select "Lines" and "pbsnodes" index</li>
<li>Y Axis (Metrics):<ul>
<li>Aggregation: Unique Count</li>
<li>Field: Mom.keyword</li>
</ul>
</li>
<li>X Axis (Buckets):<ul>
<li>Aggregation: Date Histogram,</li>
<li>Field: timestamp</li>
<li>Interval: Minute</li>
</ul>
</li>
</ul>
</div>
<p><img alt="" src="../../../../imgs/dashboard-7.png" /></p>
<h2 id="find-the-price-for-a-given-simulation">Find the price for a given simulation<a class="headerlink" href="#find-the-price-for-a-given-simulation" title="Permanent link">&para;</a></h2>
<p>Each job comes with <code class="codehilite"><span class="n">estimated_price_ondemand</span></code> and <code class="codehilite"><span class="n">estimated_price_reserved</span></code> attributes which are calculated based on: <code class="codehilite"><span class="nb">number</span> <span class="k">of</span> <span class="n">nodes</span> <span class="o">*</span> <span class="p">(</span> <span class="n">simulation_hours</span> <span class="o">*</span> <span class="n">instance_hourly_rate</span> <span class="p">)</span></code></p>
<p><img alt="" src="../../../../imgs/dashboard-1.png" /></p>
<h3 id="troubleshooting-access-permission">Troubleshooting access permission<a class="headerlink" href="#troubleshooting-access-permission" title="Permanent link">&para;</a></h3>
<p>Access to ElasticSearch is restricted to the IP you have specified during the installation. If your IP change for any reason, you won't be able to access the analytics dashboard and will get the following error message:
<div class="codehilite"><pre><span></span><span class="p">{</span><span class="nt">&quot;Message&quot;</span><span class="p">:</span><span class="s2">&quot;User: anonymous is not authorized to perform: es:ESHttpGet&quot;</span><span class="p">}</span>
</pre></div></p>
<p>To solve this issue, log in to AWS Console  and go to ElasticSearch Service dashboard. Select  your ElasticSearch cluster and click "Modify Access Policy"</p>
<p><img alt="" src="../../../../imgs/kibana-8.png" /></p>
<p>Finally, simply add your new IP under the "Condition" block, then click Submit</p>
<p><img alt="" src="../../../../imgs/kibana-9.png" /></p>
<p>Please note it may take up to 5 minutes for your IP to be whitelisted</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../07-submit-batch/" title="Lab 5: Submit Batch Workloads" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Lab 5: Submit Batch Workloads
              </span>
            </div>
          </a>
        
        
          <a href="../09-wrap-up/" title="Wrap-up" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Wrap-up
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>